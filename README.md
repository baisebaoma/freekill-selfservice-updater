# FreeKill æ‰©å±•åŒ…è‡ªåŠ©æ›´æ–°ç½‘é¡µæ¥å£ ğŸ•¹ï¸


![PHP](https://img.shields.io/badge/PHP-7.0+-777BB4?logo=php)
![License](https://img.shields.io/badge/License-GPL--3.0-blue)
![Access](https://img.shields.io/badge/Access-Open_to_all-green)

<img src="./Screenshot2.png" alt="Screenshot-success" width="50%" />

<img src="./Screenshot.png" alt="Screenshot-oncooldown" width="50%" />

å¾ˆå¤šæ—¶å€™ [æ–°æœˆæ€ï¼ˆFreeKillï¼‰](https://github.com/Qsgs-Fans/FreeKill) æ¸¸æˆæœåŠ¡å™¨çš„ä¸»äººï¼ˆä»¥ä¸‹ç®€ç§°â€œæœä¸»â€ï¼‰å’Œè¿™ä¸ªæœåŠ¡å™¨ä¸ŠæŸä¸ªæ‰©å±•åŒ…çš„å¼€å‘è€…ï¼ˆä»¥ä¸‹ç®€ç§°â€œå¼€å‘è€…â€ï¼‰å¹¶ä¸æ˜¯åŒä¸€ä¸ªäººã€‚å¼€å‘è€…å®Œæˆäº†æŸäº›å¼€å‘å¹¶æƒ³æ¨é€åˆ°æœåŠ¡å™¨ä¸Šæ¸¸ç©ï¼Œéœ€è¦æ‰¾æœä¸»å¸®å¿™ã€‚ä¹Ÿè®¸æ²¡æœ‰ç©ºâ€”â€”è¿™å¯¼è‡´å¼€å‘è€…å¼€å‘çš„æœ€æ–°ä¸èƒ½å³åˆ»è”æœºï¼Œæ˜¯ä¸ªéå¸¸æ²®ä¸§çš„äº‹æƒ…ã€‚ä¹‹å‰æœ‰è¿‡æ¯å¤©å®šæ—¶ä½¿ç”¨è‡ªåŠ¨è„šæœ¬ä¸€é”®æ›´æ–°çš„è®¾è®¡ï¼Œä½†å½“å‰ç”±äºæ¸¸æˆæ­£å¤„äºé‡å¤§å¼€å‘é˜¶æ®µï¼Œä¸€é”®æ›´æ–°æ‰€æœ‰æ‰©å±•åŒ…åˆ°æœ€æ–°ç‰ˆæœ¬ä¼šäº§ç”Ÿå„ç§é—®é¢˜ï¼Œè¯¸å¦‚æŠ¥é”™ã€æ— æ³•è¿›å…¥æœåŠ¡å™¨ç­‰ã€‚

æœ¬ä»“åº“å°è¯•ä»¥ä¸€ç§æ–¹å¼è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ç»è¿‡ç¼œå¯†æ€è€ƒä¸è®¾è®¡ï¼Œæˆ‘æ¨å‡ºå¹¶å®ç°äº†è¿™ä¸€æ–¹æ¡ˆï¼šå› ä¸º FreeKill æœåŠ¡ç«¯ç°å·²æ”¯æŒçƒ­æ›´æ–°ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šè¿‡å…è®¸ä»»ä½•äººè‡ªä¸»æ›´æ–°ï¼ˆä¸ç”¨ç»´æŠ¤æ–°çš„ç”¨æˆ·åå’Œå¯†ç ã€ä¸ç”¨å‘ŠçŸ¥ä»»ä½•äººæœåŠ¡å™¨å¯†ç ã€ä¸æˆäºˆä»»ä½•æ–°çš„æƒé™ï¼‰ï¼Œå¹¶è®¾ç½®è¾ƒé•¿ï¼ˆå…¶å® 12 å°æ—¶å¯¹äºè¿™ä¸ªä»»åŠ¡å¹¶ä¸é•¿ï¼‰çš„å†·å´æ—¶é—´ï¼Œç»“åˆç½‘é¡µç‰ˆå¤šç«¯æ”¯æŒã€æ˜“äºè®¿é—®çš„ç‰¹æ€§ï¼Œè·å¾—ç”¨æˆ·ä½“éªŒä¼˜ç§€çš„æ›´æ–°ä½“éªŒã€‚ä¹Ÿèƒ½åå‘ç£ä¿ƒå¼€å‘è€…åœ¨ master åˆ†æ”¯ä¸­æäº¤æœ€å°‘ bug çš„ç‰ˆæœ¬ã€‚

æœ¬é¡¹ç›®çš„ä¸€ä¸ªçœŸå®å®ä¾‹è¿è¡Œåœ¨ [è¿™é‡Œ](http://47.115.41.110/2hu/)ã€‚è¯•è¯•çœ‹ï¼é¡ºå¸¦ä¸€æï¼Œæ¬¢è¿æ¥æˆ‘ä»¬çš„æ–°æœˆæ€æœåŠ¡å™¨ï¼š`47.115.41.110:9527`ã€‚

æœ¬ä»“åº“çš„ä»£ç ä»¥ [2hu](https://gitee.com/youmuKon-supreme/2hu) æ‰©å±•åŒ…ä¸ºä¾‹ã€‚

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

### ğŸš€ ä¸€é”®å¼è‡ªåŠ©æ›´æ–°
- â€‹**â€‹ç®€å•æ“ä½œï¼Œç”¨æˆ·å‹å¥½**â€‹ï¼šä»»ä½•ç©å®¶/å¼€å‘è€…è®¿é—®è¯¥ç½‘ç«™å³å¯è§¦å‘æ›´æ–°ï¼Œæ— éœ€ç®¡ç†å…¶ä»–å¯†ç ã€æ— éœ€å‘å…¶ä»–äººå…±äº«æœåŠ¡å™¨å¯†ç ï¼Œè§£æ”¾æœä¸»ï¼›
- â€‹**â€‹ç®€æ˜“é˜²æŠ¤â€‹**â€‹ï¼š12 å°æ—¶å†·å´æ—¶é—´ç¡¬æ€§é™åˆ¶ã€‚

### âš™ï¸ æŠ€æœ¯æ¶æ„

ç½‘é¡µè¯·æ±‚ â†’ PHPæ¥å£ â†’ æ‰§è¡Œ2hu.sh â†’ è¿”å›Screenä¼šè¯è¾“å‡º

## ğŸ“¦ åç«¯å·¥ä½œåŸç†

```
#!/bin/bash
# é€šè¿‡Screenä¼šè¯æ‰§è¡Œæ›´æ–°å‘½ä»¤
screen -S freekill -X stuff "u 2hu\n"
# æ•è·è¾“å‡ºå¹¶ç”Ÿæˆæ—¥å¿—æ–‡ä»¶
grep -A 5 "Running command: \"u 2hu\"" /tmp/screen_output.XXXXXX
```

## ğŸ› ï¸ éƒ¨ç½²æŒ‡å—

### å‰ç½®è¦æ±‚

1. FreeKillæœåŠ¡å™¨ï¼ˆéœ€ä¿æŒScreenä¼šè¯è¿è¡Œï¼‰
2. PHP 7.0+ & Nginx/Apache
3. sudoæƒé™ï¼ˆç”¨äºæ‰§è¡Œæ›´æ–°è„šæœ¬ï¼‰
4. å·²ç»æŒ‰[æ–°æœˆä¹‹ä¹¦çš„ç›¸å…³å†…å®¹](https://fkbook-all-in-one.readthedocs.io/zh-cn/latest/server/index.html)é…ç½®å¥½æœåŠ¡å™¨

### å®‰è£…æ­¥éª¤

#### æ”¾ç½®åç«¯è„šæœ¬

æˆ‘æ˜¯å°† `2hu.sh` æ”¾ç½®åœ¨ `/usr/local/bin/` ä¸‹ã€‚ä½ å¯ä»¥æŒ‰è‡ªå·±çš„å–œå¥½æ¥ã€‚

#### éƒ¨ç½²å‰ç«¯

æˆ‘æ˜¯å°† `index.php` æ”¾ç½®åœ¨ `/var/www/html/2hu` ä¸‹ï¼Œè¿™æ ·è®¿é—® `[æˆ‘çš„æœåŠ¡å™¨]/2hu` å°±å¯ä»¥ã€‚ä½ å¯ä»¥æŒ‰è‡ªå·±çš„å–œå¥½æ¥ã€‚

#### é…ç½® Screen ä¼šè¯

```
screen -S freekill -dm
```

#### é…ç½® sudoersï¼Œå…è®¸ www-data ç”¨æˆ·æ‰§è¡Œç‰¹å®š screen å‘½ä»¤â€‹â€‹

> æ³¨æ„ï¼šå½“å‰ç‰ˆæœ¬çš„åç«¯æ–‡ä»¶ `2hu.sh` åœ¨è¢« PHP æ‰§è¡Œæ—¶ä¼šæœ‰æƒé™é—®é¢˜ã€‚å¦‚æœä½ çš„ FreeKill æœåŠ¡ç«¯æ˜¯ä½¿ç”¨ `root` ç”¨æˆ·åˆ›å»ºçš„ï¼Œé‚£ä¹ˆæ— æ³•è¿”å›è¾“å‡ºç»“æœï¼ˆå› ä¸º PHP ä½¿ç”¨çš„æ˜¯ `www-data` ç”¨æˆ·ï¼‰ï¼Œä½†æ˜¯å¯ä»¥æ­£å¸¸æ‰§è¡Œä»£ç ã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆå‰ç«¯å¹¶æ²¡æœ‰ç»™å‡ºä»»ä½•æ¥è‡ª FreeKill æœåŠ¡ç«¯çš„è¾“å‡ºã€‚å°è¯•äº†å¾ˆå¤šåŠæ³•ï¼Œæš‚æ—¶æ— æ³•è§£å†³â€¦â€¦

```
sudo visudo
```

åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ï¼š

```
www-data ALL=(root) NOPASSWD: /usr/bin/screen -r freekill
www-data ALL=(root) NOPASSWD: /usr/bin/screen -S freekill -X quit
www-data ALL=(root) NOPASSWD: /usr/bin/screen -S freekill -X stuff *
```

âš ï¸ æ³¨æ„äº‹é¡¹

1. â€‹â€‹Screen ä¼šè¯å¿…é¡»ä¿æŒè¿è¡Œâ€‹â€‹ï¼Œå¦åˆ™ä¼šè§¦å‘ `ERROR: Screen session not found`
2. FreeKill æœåŠ¡ç«¯çš„ Screen ä¼šè¯åå­—é¡»ä¸º `freekill`
3. æ›´æ–°æ—¥å¿—ä¿å­˜åœ¨ `/tmp/2hu_output.txt`
4. å†·å´æ—¶é—´é€šè¿‡ `/tmp/2hu_lock.txt` å®ç°
5. ä¸´æ—¶æ–‡ä»¶å­˜å‚¨åœ¨ `/tmp/screen_output.XXXXXX`

## é‡åˆ°äº†é—®é¢˜ï¼Ÿ

è¯·æ Issueï¼Œå¯ä»¥è®©æ›´å¤šäººçœ‹åˆ°æ‚¨çš„é—®é¢˜ã€åæ¥è€…é‡åˆ°ç›¸åŒçš„é—®é¢˜ä¹Ÿæœ‰å‚è€ƒã€‚å½“ç„¶ï¼Œç»™æˆ‘å‘é‚®ä»¶ï¼ˆ[baisebaoma@foxmail.com](mailto:baisebaoma@foxmail.com)ï¼‰ä¹Ÿå¯ä»¥ã€‚

## Star History

å¦‚æœè§‰å¾—å¯¹æ‚¨æœ‰ç”¨ï¼Œè¯·ç‚¹ä¸€ä¸ª Starï¼

[![Star History Chart](https://api.star-history.com/svg?repos=baisebaoma/freekill-selfservice-updater&type=Date)](https://www.star-history.com/#baisebaoma/freekill-selfservice-updater&Date)

## ğŸ“œ åè®®å£°æ˜

æœ¬é¡¹ç›®é‡‡ç”¨ â€‹â€‹GPL-3.0â€‹â€‹ å¼€æºåè®®ï¼Œä»»ä½•è¡ç”Ÿé¡¹ç›®å¿…é¡»ä¿æŒå¼€æºã€‚
